<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HousePal â€“ Register</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }

/* Background updated */
body { 
    background: #EAE2B7; 
    color: #003090; 
    padding: 20px; 
}

/* Title */
h1 { 
    color: #D62828; 
    margin-bottom: 20px; 
    text-align: center; 
    font-size: 2.3rem; 
}

/* Form background updated */
form {
    background: #FCBF49;
    padding: 20px;
    border-radius: 14px;
    max-width: 450px;
    margin: auto;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
}

label { 
    font-weight: bold; 
    color: #003090; 
}

input, select {
    width: 100%; 
    padding: 10px; 
    margin-top: 6px; 
    margin-bottom: 18px;
    border: none; 
    border-radius: 6px;
}

/* Button updated */
button {
    width: 100%;
    padding: 12px;
    background: #F77F00;
    color: white;
    font-size: 1.1rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}

button:hover { 
    background: #D62828; 
}

/* Login link */
a {
    color: #003090;
    font-weight: bold;
}
</style>

</head>
<body>

<h1>Create Your Account</h1>

<form id="registerForm">

    <label>Full Name</label>
    <input type="text" id="name" required placeholder="Enter your full name">

    <label>Email Address</label>
    <input type="email" id="email" required placeholder="Enter your email">

    <label>Password</label>
    <input type="password" id="password" required placeholder="Create password">

    <label>Budget (Ksh)</label>
    <select id="budget" required>
        <option value="">Select Budget</option>
        <option value="low">Below 20,000</option>
        <option value="medium">20,000 - 50,000</option>
        <option value="high">Above 50,000</option>
    </select>

    <label>Preferred Location</label>
    <select id="location" required>
        <option value="">Choose</option>
        <option value="strathmore">Strathmore University</option>
        <option value="uon">University of Nairobi</option>
        <option value="kenyatta">Kenyatta University</option>
        <option value="cbd">CBD / Town</option>
    </select>

    <label>Sleeping Habit</label>
    <select id="sleep" required>
        <option value="">Choose</option>
        <option value="Early Sleeper">Early Sleeper</option>
        <option value="Late Sleeper">Late Sleeper</option>
    </select>

    <label>Noise Preference</label>
    <select id="noise" required>
        <option value="">Choose</option>
        <option value="Quiet">Quiet</option>
        <option value="Moderate Noise">Moderate Noise</option>
    </select>

    <label>Smoking</label>
    <select id="smoking" required>
        <option value="">Choose</option>
        <option value="Non-smoker">Non-smoker</option>
        <option value="Smoker">Smoker</option>
    </select>

    <label>Pets</label>
    <select id="pets" required>
        <option value="">Choose</option>
        <option value="No Pets">No Pets</option>
        <option value="Has Pets">Has Pets</option>
    </select>

    <button type="submit">Register</button>

    <p style="text-align:center; margin-top:15px;">
        Already have an account?
        <a href="login.html">Login</a>
    </p>

</form>

<script>
document.getElementById('registerForm').addEventListener('submit', function(e){
    e.preventDefault();

    // Collect user data
    const newUser = {
        name: document.getElementById('name').value.trim(),
        email: document.getElementById('email').value.trim(),
        password: document.getElementById('password').value,
        budget: document.getElementById('budget').value,
        location: document.getElementById('location').value,
        sleep: document.getElementById('sleep').value,
        noise: document.getElementById('noise').value,
        smoking: document.getElementById('smoking').value,
        pets: document.getElementById('pets').value
    };

    // Get existing users
    let users = JSON.parse(localStorage.getItem('users')) || [];

    // Check if email exists
    if(users.some(u => u.email === newUser.email)){
        alert("This email is already registered. Please login.");
        return;
    }

    // Save user
    users.push(newUser);
    localStorage.setItem('users', JSON.stringify(users));

    // Save logged-in email AND username
    sessionStorage.setItem('loggedInEmail', newUser.email);
    sessionStorage.setItem('username', newUser.name); // <-- important fix

    alert("Registration successful! Redirecting to Dashboard...");
    window.location.href = "dashboard.html";
});
</script>

</body>
</html>
